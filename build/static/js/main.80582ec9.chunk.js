(this["webpackJsonpwhatsapp-clone"]=this["webpackJsonpwhatsapp-clone"]||[]).push([[0],{44:function(e,t,c){},45:function(e,t,c){},54:function(e,t,c){"use strict";c.r(t);var a=c(8),n=c.n(a),s=c(37),r=c.n(s),i=(c(44),c(45),c(25)),j=c(12),l=c(0),o=c.n(l),b=c(2),u=c(11),d=c(38),O=c(33),m=c(20),h=Object(d.a)({apiKey:"AIzaSyCD0u4cM1amtRubdTRX-zcsyefDax1QV6o",authDomain:"whatsapp-clone-e5957.firebaseapp.com",databaseURL:"https://whatsapp-clone-e5957.firebaseio.com",projectId:"whatsapp-clone-e5957",storageBucket:"whatsapp-clone-e5957.appspot.com",messagingSenderId:"395181141987",appId:"1:395181141987:web:a31aba617e47f87781fad6"}),p=Object(O.a)(h),x=Object(m.d)(h),f=c(6),v=function(e){var t=e.user,c=e.selectUser;return Object(f.jsx)("div",{className:"user_wrapper",onClick:function(){return c(t)},children:Object(f.jsxs)("div",{className:"user_info",children:[Object(f.jsxs)("div",{className:"user_detail",children:[Object(f.jsx)("img",{src:"https://mpng.subpng.com/20180509/fyq/kisspng-computer-icons-user-profile-clip-art-5af2c2026fcf73.188817051525858818458.jpg",alt:"avatar",className:"avatar"}),Object(f.jsx)("h5",{children:t.name})]}),Object(f.jsx)("div",{className:"user_status ".concat(t.isOnline?"online":"offline")})]})})},g=function(e){var t=e.handleSubmit,c=e.text,a=e.setText;return Object(f.jsxs)("form",{className:"message_form",onSubmit:t,children:[Object(f.jsx)("div",{children:Object(f.jsx)("input",{type:"text",placeholder:"Type a message...",value:c,onChange:function(e){return a(e.target.value)}})}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",className:"btn btn-outline-success",children:"Send"})})]})},w=c(56),N=c(57),S=c(39),_=c.n(S),y=function(e){var t=e.msg,c=e.user1,n=e.check,s=Object(a.useRef)();return Object(a.useEffect)((function(){s.current.scrollIntoView({behavior:"smooth"})}),[t]),Object(f.jsxs)("div",{className:"message_wrapper ".concat(t.from===c?"own":""),ref:s,children:[Object(f.jsxs)("p",{className:t.from===c?"me":"friend",children:[t.text+" ",!1===n?Object(f.jsx)(w.a,{color:"royalblue",fill:"white",viewBox:"0 0 16 16"}):!1===t.seen?Object(f.jsx)(N.a,{color:"royalblue",fill:"white",viewBox:"0 0 16 16"}):Object(f.jsx)(N.a,{color:"royalblue",viewBox:"0 0 16 16"}),Object(f.jsx)("br",{})]}),Object(f.jsx)("h6",{children:Object(f.jsx)(_.a,{format:"h:mm a",children:t.createdAt.toDate()})})]})};var C=function(){var e=n.a.useState([]),t=Object(u.a)(e,2),c=t[0],s=t[1],r=n.a.useState(""),i=Object(u.a)(r,2),j=i[0],l=i[1],d=n.a.useState(""),O=Object(u.a)(d,2),h=O[0],w=O[1],N=n.a.useState([]),S=Object(u.a)(N,2),_=S[0],C=S[1],D=p.currentUser.uid;Object(a.useEffect)((function(){var e=Object(m.c)(x,"users"),t=Object(m.g)(e,Object(m.i)("uid","not-in",[p.currentUser.uid])),c=Object(m.e)(t,(function(e){var t=[];e.forEach((function(e){t.push(e.data())})),s(t)}));return function(){return c()}}),[]);var k=function(e){l(e);var t=e.uid,c=D>t?D+t:t+D,a=Object(m.c)(x,"messages",c,"chat"),n=Object(m.g)(a,Object(m.f)("createdAt","asc"));Object(m.e)(n,(function(e){var t=[];e.forEach((function(e){e.data().from!==D&&Object(m.h)(e.ref,{seen:!0}),t.push(e.data())})),C(t)}))},F=function(){var e=Object(b.a)(o.a.mark((function e(t){var c,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c=j.uid,a="".concat(D>c?D+c:c+D),e.next=5,Object(m.b)(Object(m.c)(x,"messages",a,"chat"),{text:h,from:D,to:c,createdAt:m.a.fromDate(new Date),seen:!1});case 5:w("");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:"home_container",children:[Object(f.jsx)("div",{className:"users_container",children:c.map((function(e){return Object(f.jsx)(v,{user:e,selectUser:k},e.uid)}))}),Object(f.jsx)("div",{className:"messages_container",children:j?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"messages_user",children:Object(f.jsx)("h3",{children:j.name})}),Object(f.jsx)("div",{className:"messages",children:_.length?_.map((function(e,t){return Object(f.jsx)(y,{msg:e,user1:D,check:j.isOnline},t)})):null}),Object(f.jsx)(g,{handleSubmit:F,text:h,setText:w})]}):Object(f.jsx)("h3",{className:"no_conv",children:"Select a user to start conversation"})})]})},D=c(22),k=c(26),F=Object(a.createContext)(),A=function(e){var t=e.children,c=Object(a.useState)(null),n=Object(u.a)(c,2),s=n[0],r=n[1],i=Object(a.useState)(!0),j=Object(u.a)(i,2),l=j[0],o=j[1];return Object(a.useEffect)((function(){Object(O.b)(p,(function(e){r(e),o(!1)}))}),[]),l?"LOading...":Object(f.jsx)(F.Provider,{value:{user:s},children:t})};var E=function(){var e=Object(j.f)(),t=Object(a.useContext)(F).user,c=function(){var t=Object(b.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(D.j)(Object(D.d)(x,"users",p.currentUser.uid),{isOnline:!1});case 2:return t.next=4,Object(k.e)(p);case 4:e("/login");case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(f.jsxs)("nav",{children:[Object(f.jsx)("h3",{children:Object(f.jsx)(i.b,{to:"/home",children:"Whatsapp clone"})}),Object(f.jsx)("div",{children:t?Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("button",{onClick:c,className:" btn btn-danger",children:"Sign out"})}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(i.b,{to:"/login",children:"Login"}),Object(f.jsx)(i.b,{to:"/signup",children:"Signup"})]})})]})},U=(c(53),c(4)),I=c(15);var L=function(){var e=Object(a.useState)({name:"",email:"",password:"",error:"",loading:!1}),t=Object(u.a)(e,2),c=t[0],n=t[1],s=c.name,r=c.email,i=c.password,l=c.error,o=c.loading,b=Object(j.f)(),d=function(e){n(Object(I.a)(Object(I.a)({},c),{},Object(U.a)({error:""},e.target.name,e.target.value)))};return Object(f.jsxs)("section",{children:[Object(f.jsx)("h3",{children:"Create An Account"}),Object(f.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault(),n(Object(I.a)(Object(I.a)({},c),{},{error:null,loading:!0})),s&&r&&i||n(Object(I.a)(Object(I.a)({},c),{},{error:"Please enter all fields"})),Object(k.a)(p,r,i).then((function(e){Object(D.i)(Object(D.d)(x,"users",e.user.uid),{uid:e.user.uid,name:s,email:r,password:i,isOnline:!0,createdAt:D.a.fromDate(new Date)}),n({name:"",email:"",password:"",error:null,loading:!1}),b("/")})).catch((function(e){n(Object(I.a)(Object(I.a)({},c),{},{error:e.message,loading:!1}))}))},children:[Object(f.jsxs)("div",{className:"input_container",children:[Object(f.jsx)("label",{htmlFor:"first_name",children:"First Name"}),Object(f.jsx)("input",{type:"text",name:"name",value:s,onChange:d})]}),Object(f.jsxs)("div",{className:"input_container",children:[Object(f.jsx)("label",{htmlFor:"email",children:"Email"}),Object(f.jsx)("input",{type:"text",name:"email",value:r,onChange:d})]}),Object(f.jsxs)("div",{className:"input_container",children:[Object(f.jsx)("label",{htmlFor:"password",children:"Password"}),Object(f.jsx)("input",{type:"password",name:"password",value:i,onChange:d})]}),l&&Object(f.jsx)("div",{className:"error",children:l}),Object(f.jsx)("div",{className:"btn_container",children:Object(f.jsx)("button",{className:"btn",disabled:o,children:"Sign Up"})})]})]})};var B=function(){var e=Object(a.useState)({email:"",password:"",error:"",loading:!1}),t=Object(u.a)(e,2),c=t[0],n=t[1],s=c.email,r=c.password,i=c.error,l=c.loading,o=Object(j.f)(),b=function(e){n(Object(I.a)(Object(I.a)({},c),{},Object(U.a)({error:""},e.target.name,e.target.value)))};return Object(f.jsxs)("section",{children:[Object(f.jsx)("h3",{children:"Login to Whatsapp Clone"}),Object(f.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault(),n(Object(I.a)(Object(I.a)({},c),{},{error:null,loading:!0})),s&&r||n(Object(I.a)(Object(I.a)({},c),{},{error:"Please enter all fields"})),Object(k.d)(p,s,r).then((function(e){Object(D.j)(Object(D.d)(x,"users",e.user.uid),{isOnline:!0}),n({email:"",password:"",error:null,loading:!1}),o("/home")})).catch((function(e){n(Object(I.a)(Object(I.a)({},c),{},{error:e.message,loading:!1}))}))},children:[Object(f.jsxs)("div",{className:"input_container",children:[Object(f.jsx)("label",{htmlFor:"email",children:"Email"}),Object(f.jsx)("input",{type:"text",name:"email",value:s,onChange:b})]}),Object(f.jsxs)("div",{className:"input_container",children:[Object(f.jsx)("label",{htmlFor:"password",children:"Password"}),Object(f.jsx)("input",{type:"password",name:"password",value:r,onChange:b})]}),i&&Object(f.jsx)("div",{className:"error",children:i}),Object(f.jsx)("div",{className:"btn_container",children:Object(f.jsx)("button",{className:"btn",disabled:l,children:l?"Logging in..":"Login"})})]})]})};var P=function(){return Object(f.jsx)(A,{children:Object(f.jsx)(i.a,{children:Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)(E,{}),Object(f.jsxs)(j.c,{children:[Object(f.jsx)(j.a,{path:"/home",element:Object(f.jsx)(C,{})}),Object(f.jsx)(j.a,{path:"/signup",element:Object(f.jsx)(L,{})}),Object(f.jsx)(j.a,{path:"/login",element:Object(f.jsx)(B,{})})]})]})})})};r.a.render(Object(f.jsx)(n.a.StrictMode,{children:Object(f.jsx)(P,{})}),document.getElementById("root"))}},[[54,1,2]]]);
//# sourceMappingURL=main.80582ec9.chunk.js.map